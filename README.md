# 在线零售管理系统 (Online Retail Management System)

## 系统简介

这是一个基于 Python 开发的完整在线零售管理系统，提供商品管理、订单处理、用户认证等核心功能，适用于中小型零售企业的日常运营管理。

## 功能特性

### 🔐 用户认证与权限管理
- **双角色系统**：超级管理员 vs 普通管理员
- **安全认证**：SHA-256 密码加密存储
- **账户保护**：连续失败登录锁定机制
- **密码强度验证**：必须包含大小写字母和数字，长度≥8位

### 📦 商品管理
- 添加新商品（商品编号、名称、分类、价格、库存）
- 查看所有商品信息
- 修改商品信息
- 删除商品（仅限超级管理员）

### 🛒 订单管理
- 创建用户订单（带事务保障）
- 查询订单详细信息
- 撤销订单（自动恢复库存）
- 订单统计分析

### 💾 数据管理
- 自动数据持久化（JSON格式）
- 数据备份与恢复
- 系统日志记录与查看

## 技术架构

### 核心模块
```
├── 日志记录模块 (Logger)
├── 用户管理模块 (User & AuthManager)
├── 商品管理模块 (Product)
├── 订单管理模块 (Order)
└── 主系统类 (MallSystem)
```

### 数据文件
- `users.json` - 用户账户数据
- `mall_data.txt` - 商品和订单数据
- `system.log` - 系统操作日志
- `backup_YYYYMMDD_HHMMSS.txt` - 数据备份文件

## 快速开始

### 运行要求
- Python 3.6+
- 无需额外依赖包

### 启动系统
```bash
python Online_Retail_Management_System.py
```

### 默认账户
系统预置两个测试账户：

| 用户名 | 密码 | 角色 | 权限 |
|--------|------|------|------|
| Admin123 | Admin@123 | 超级管理员 | 所有功能 |
| User123 | User@123 | 普通管理员 | 受限功能 |

## 使用指南

### 1. 首次使用
- 系统启动后会自动创建默认账户
- 新用户可选择注册或使用现有账户登录

### 2. 权限说明
**超级管理员** 拥有完整权限：
- 所有商品管理操作
- 数据备份与恢复
- 系统日志管理
- 用户账户管理

**普通管理员** 受限权限：
- 添加、查看、修改商品
- 订单创建、查询、撤销
- 订单统计分析

### 3. 主要操作流程

#### 商品管理
```
添加商品 → 输入商品信息 → 自动保存
查看商品 → 显示所有商品列表
修改商品 → 选择修改项 → 更新信息
删除商品 → 确认删除 → 移除商品
```

#### 订单处理
```
创建订单 → 验证信息 → 库存检查 → 扣减库存 → 生成订单
查询订单 → 输入订单号 → 显示详细信息
撤销订单 → 恢复库存 → 标记订单状态
```

### 4. 安全特性
- **密码保护**：高强度密码要求，哈希存储
- **会话管理**：登录状态跟踪
- **操作审计**：完整日志记录
- **数据完整性**：事务回滚机制

## 系统菜单

```
1. 添加商品信息
2. 查看所有商品
3. 删除商品信息 [超级管理员]
4. 修改商品信息
5. 创建用户订单
6. 查询订单信息
7. 撤销订单
8. 订单统计分析
9. 数据备份 [超级管理员]
10. 数据恢复 [超级管理员]
11. 查看系统日志 [超级管理员]
12. 清空系统日志 [超级管理员]
0. 退出系统
```

## 故障排除

### 常见问题
1. **数据加载失败**：检查 `mall_data.txt` 文件完整性
2. **登录失败**：确认用户名密码，检查账户是否被锁定
3. **权限不足**：使用超级管理员账户或联系管理员

### 数据恢复
- 定期备份数据文件
- 使用系统内置备份恢复功能
- 重要操作前建议手动备份

## 开发说明

### 代码结构
- 面向对象设计，模块化架构
- 类型注解支持
- 异常处理机制
- 响应时间监控

### 扩展建议
- 添加数据库支持（SQLite/MySQL）
- 实现Web界面
- 增加报表导出功能
- 集成支付接口

## 许可证

本项目仅供学习和内部使用，请遵守相关法律法规。

---
*系统版本：1.0 | 最后更新：2025年*
